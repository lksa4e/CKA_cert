1. 502 bad gateway가 뜨는경우
   - Service가 없는 경우

2. container port 에서 expose 하라고 하는 경우 pod에도 port 설정을 해주어야 한다.
   
3. pod가 pending 상태에 있는 이유
   - 스케쥴러가 없는 경우
     -> nodeName 지정을 통해 수동 할당 가능
   - 스케쥴링할 노드가 없는경우(자원이 없어서)
   - 볼륨 지정이 제대로 안되서
     kubectl exec webapp -- cat /log/app.log
     Error from server (BadRequest): pod webapp does not have a host assigned

4. ReplicaSet에서 template을 사용할 경우에 rs의 label과 template의 label은 동일해야한다. (deployment도 확인 필요)

5. Pod의 CrashLoopBackOff의 이유
   - Out of memory (OOMKilled)

6. controlplane node에서 etcd cluster로의 address
   - --listen-client-urls=https://127.0.0.1:2379,https://10.156.254.3:2379

7. etcd의 server certificate file 위치
   - --cert-file=/etc/kubernetes/pki/etcd/server.crt
   etcd의 CA Certificate file 위치
   - --trusted-ca-file=/etc/kubernetes/pki/etcd/ca.crt

8. etcd restore의 주의사항
   - restore 한 후 restore 정보를 etcd 구성 --data-dir= 에 넣어주어야 함
   - 밑에쪽의 voluems, volumemount의 hostPath도 똑같이 바꿔줘야함
ETCDCTL_API=3 etcdctl snapshot restore /opt/snapshot-pre-boot.db --data-dir=/var/lib/etcd-from-backup


9. kubectl 커맨드가 작동하지 않는 경우에는 kube-apiserver or etcd 가 down 된 경우
   - docker ps -a 
   - docker logs를 통해 컨테이너 레벨에서 확인

10. user가 생성한 csr key file을 가지고 CSR object를 만드려면 base64로 인코딩을 해야함

11. CSR의 group을 확인하기 위해서는 csr 을 yaml 형태로 조회해야함

12. Kubeconfig 위치 
   - /root/.kube

13. RBAC를 사용하고 싶을 때는 kube api server의 config에서(/etc/kubernetes/manifest/apiserver.yaml)  
    --authorization-mode=RBAC를 해주어야함
    - 적용되는 순서는 앞에서부터 차례대로 적용됨

14. Role,Rolebinding은 Namespace에 종속됨. 특정 namespace에 대한 권한을 부여하려면 metadata에 namespace 선언 필요

15. RBAC의 적용이 제대로 되었는지 확인하기 위한 명령어
   - kubectl auth can-i <명령> <target> --as <user name>
     kubectl auth can-i create deployments --as dev-user

16. RBAC apiGroups를 확인하기 위한 명령어
   - kubectl api-resources

17. pod의 user를 확인하는 방법
   - kubectl exec <pod-name> -- whoami

18. definition file에서 정의하는 volumemounts의 name은 colume의 name과 동일하다.
    컨테이너 내부의 볼륨마운트는 컨테이너 내부에서 해당 볼륨을 Mountpath 경로로 사용하겠다는 것이고,
    volume의 hostpath는 node에서 볼륨 역할을 하는 경로이다.

19. storage class 를 no-provisioner 로 사용하는 경우는 pv를 사용하는 pod가 생성될때까지 bound를 pending시키기 위함

20. DNS resolution을 확인하기 위해 nslookup을 사용하는 경우 nslookup은 /etc/resolv.conf 파일에 있는 local 값을 참조하지 않고 DNS 서버만 참조한다

21. 클러스터의 network를 조회하는 방법
   - ip link -> network interface 조회
   - ip addr -> network interface + ip address까지 조회
   - ifconfig -> 위에 두개꺼 합쳐놓은거(이거를 쓰자)
   - arp <node> -> 상대 Node의 Mac address를 조회하는 방법 (ssh로 들어가서 ip addr 한 후에 ens 찾는 방법도 있음)
   - ip route -> route 정보를 확인하는 방법 (default Gateway의 ip address를 조회하는 방법)
   - netstat -nplt -> program(kubelet ,etcd, kube-proxy,,,) 들의 port를 조회하는 방법
   - cat /etc/network/interfaces -> 네트워크 인터페이스에 대한 정보 조회
